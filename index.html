<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>M.Al.Boushi Store</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- 1. Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª (ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡) --- */
        :root {
            --bg-body: #0f172a;
            --bg-gradient: radial-gradient(circle at 50% 0%, #1e293b, #0f172a);
            --card-glass: rgba(30, 41, 59, 0.85); /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø´ÙØ§ÙÙŠØ© Ù„Ù„Ø£Ø¯Ø§Ø¡ */
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --primary: #3b82f6;
            --border: rgba(255,255,255,0.06);
            --nav-bg: rgba(15, 23, 42, 0.95);
        }

        [data-theme="light"] {
            --bg-body: #f8fafc;
            --bg-gradient: radial-gradient(circle at 50% 0%, #e2e8f0, #f8fafc);
            --card-glass: rgba(255, 255, 255, 0.9);
            --text-main: #1e293b;
            --text-muted: #64748b;
            --primary: #2563eb;
            --border: rgba(0,0,0,0.05);
            --nav-bg: rgba(255, 255, 255, 0.95);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background: var(--bg-body); background-image: var(--bg-gradient);
            color: var(--text-main); font-family: 'Cairo', sans-serif; min-height: 100vh; 
            transition: background 0.3s; overflow-x: hidden; padding-bottom: 30px;
            -webkit-overflow-scrolling: touch; /* Ù†Ø¹ÙˆÙ…Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        }

        /* Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        body.no-scroll { overflow: hidden; }

        /* --- 2. Ø§Ù„Ù‡ÙŠØ¯Ø± --- */
        header {
            position: sticky; top: 0; z-index: 1000; background: var(--nav-bg);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border); padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center;
        }
        /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø¹Ø§Ø± ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª */
        .logo { font-size: 1.3rem; font-weight: 900; color: var(--text-main); letter-spacing: 1px; }
        .logo span { color: var(--primary); }
        
        .header-left { display: flex; gap: 15px; }
        .icon-btn { font-size: 1.2rem; cursor: pointer; color: var(--text-main); transition: 0.3s; }

        /* --- 3. Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
        .hero { text-align: center; padding: 25px 20px 5px; }
        
        .hero h1 { 
            font-size: 1.8rem; margin-bottom: 5px; 
            background: linear-gradient(to right, var(--primary), #60a5fa);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .hero p { color: var(--text-muted); font-size: 0.9rem; margin-bottom: 25px; }

        /* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (ØªÙØ§Ø¹Ù„ÙŠØ© Ø§Ù„Ø¢Ù†) */
        .stats { display: flex; justify-content: center; gap: 12px; margin-bottom: 25px; }
        .stat-item { 
            background: var(--card-glass); 
            border: 1px solid var(--border); border-radius: 16px; 
            padding: 10px 20px; min-width: 90px;
            transition: 0.2s; cursor: default;
            user-select: none;
        }
        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¶ØºØ· */
        .stat-item:active { transform: scale(0.95); background: rgba(59, 130, 246, 0.1); border-color: var(--primary); }
        
        .stat-num { font-weight: 800; color: var(--primary); font-size: 1.2rem; display: block; }
        .stat-lbl { font-size: 0.75rem; color: var(--text-muted); font-weight: 600; }

        /* Ø§Ù„Ø¨Ø­Ø« */
        .search-container { position: relative; max-width: 500px; margin: 0 auto 20px; }
        .search-box {
            width: 100%; background: var(--card-glass); border: 1px solid var(--border);
            padding: 14px 45px 14px 20px; border-radius: 50px; color: var(--text-main);
            font-family: 'Cairo'; font-size: 1rem; outline: none; transition: 0.3s;
        }
        .search-box:focus { border-color: var(--primary); }
        .search-icon { position: absolute; right: 20px; top: 16px; color: var(--text-muted); }

        /* --- 4. Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯) --- */
        .tabs-wrapper {
            position: sticky; top: 68px; z-index: 900;
            padding: 5px 0; margin-bottom: 15px;
            background: linear-gradient(to bottom, rgba(15,23,42,0) 0%, var(--bg-body) 100%); /* Ø®Ø¯Ø¹Ø© Ø¨ØµØ±ÙŠØ© */
        }
        .tabs-container {
            display: flex; gap: 8px; overflow-x: auto; padding: 5px 20px;
            scrollbar-width: none;
        }
        .tabs-container::-webkit-scrollbar { display: none; }

        .tab-btn {
            background: var(--card-glass); color: var(--text-muted); border: 1px solid var(--border);
            padding: 8px 20px; border-radius: 50px; cursor: pointer; transition: 0.3s;
            font-family: 'Cairo'; font-weight: 700; font-size: 0.85rem; white-space: nowrap; flex-shrink: 0;
        }
        .tab-btn.active { 
            background: var(--primary); color: white; border-color: var(--primary); 
            transform: scale(1.05);
        }

        /* --- 5. Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„ÙƒØ±ÙˆØª --- */
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 10px 20px; max-width: 1000px; margin: 0 auto; }
        @media(min-width: 768px) { .grid { grid-template-columns: repeat(4, 1fr); } }

        .card {
            background: var(--card-glass); border-radius: 18px; padding: 15px; 
            text-decoration: none; color: var(--text-main); display: flex; flex-direction: column; 
            align-items: center; border: 1px solid var(--border); position: relative; 
            transition: transform 0.2s; 
            /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù€ Blur Ø§Ù„Ø«Ù‚ÙŠÙ„ Ù…Ù† Ø§Ù„ÙƒØ±ÙˆØª Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        }
        .card:active { transform: scale(0.97); }
        
        .mod-badge {
            position: absolute; top: 10px; left: 10px; 
            background: rgba(59, 130, 246, 0.1); color: var(--primary);
            font-size: 0.65rem; padding: 3px 8px; border-radius: 6px; font-weight: bold;
        }
        
        .heart-btn {
            position: absolute; top: 10px; right: 10px; font-size: 1.1rem; color: var(--text-muted);
            cursor: pointer; z-index: 5; background: none; border: none;
        }
        .heart-btn.active { color: #ef4444; }

        .card img { 
            width: 75px; height: 75px; border-radius: 16px; margin-bottom: 12px; 
            object-fit: cover; background: #1e293b;
        }

        .card-title {
            font-size: 0.9rem; font-weight: 700; text-align: center; margin-bottom: 10px;
            line-height: 1.3; height: 38px; overflow: hidden;
            display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
        }

        .get-btn {
            background: transparent; color: var(--primary); border: 1.5px solid var(--primary);
            font-size: 0.8rem; font-weight: 700; padding: 5px 20px; border-radius: 50px; 
            width: 100%; text-align: center;
        }
        .card:hover .get-btn { background: var(--primary); color: white; }

        /* --- 6. Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø²Ø¬Ø§Ø¬ Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª) --- */
        .sidebar {
            height: 100%; width: 0; position: fixed; z-index: 2000; top: 0; right: 0;
            background-color: #0f172a; overflow-x: hidden; transition: 0.3s;
            box-shadow: -5px 0 20px rgba(0,0,0,0.5); padding-top: 20px;
            border-left: 1px solid var(--border);
        }
        .sidebar-header { text-align: center; padding-bottom: 20px; margin-bottom: 10px; }
        .profile-img { width: 90px; height: 90px; border-radius: 50%; border: 3px solid var(--primary); margin-bottom: 10px; }
        
        /* Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠØ© ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .sidebar-link { 
            margin: 10px 20px; padding: 12px 15px; 
            background: rgba(255, 255, 255, 0.03); /* Ø²Ø¬Ø§Ø¬ Ø®ÙÙŠÙ */
            border-radius: 12px; text-decoration: none; font-size: 0.95rem; color: #cbd5e1; 
            display: flex; align-items: center; border: 1px solid var(--border);
            transition: 0.2s;
        }
        .sidebar-link:active { transform: scale(0.98); background: rgba(59, 130, 246, 0.1); border-color: var(--primary); }
        .sidebar-link i { width: 30px; color: var(--primary); font-size: 1.1rem; }

        .close-btn { position: absolute; top: 15px; left: 20px; font-size: 25px; color: #94a3b8; background: none; border: none; }
        #overlay { position: fixed; display: none; width: 100%; height: 100%; top: 0; left: 0; background: rgba(0,0,0,0.6); z-index: 1500; backdrop-filter: blur(4px); }

        .status { grid-column: span 2; text-align: center; color: var(--text-muted); margin-top: 50px; font-size: 0.9rem; }
        footer { text-align: center; padding: 30px; color: var(--text-muted); font-size: 0.8rem; margin-top: 40px; border-top: 1px solid var(--border); }
    </style>
</head>
<body>

    <header>
        <div class="logo">M<span>.Al.Boushi</span></div>
        <div class="header-left">
            <i class="fas fa-moon icon-btn" id="themeBtn" onclick="toggleTheme()"></i>
            <i class="fas fa-bars icon-btn" onclick="openNav()"></i>
        </div>
    </header>

    <div id="mySidebar" class="sidebar">
        <button class="close-btn" onclick="closeNav()">&times;</button>
        <div class="sidebar-header">
            <img src="https://midomido.neocities.org/mohammadalboushi.png" alt="Profile" class="profile-img">
            <h3 style="margin:10px 0; color:white; font-size:1.1rem;">Mohammad Al Boushi</h3>
            <p style="color:#94a3b8; font-size:0.8rem; padding:0 10px; line-height:1.4;">
                Ù†Ø¨Ù†ÙŠ Ø§Ù„Ø£ÙÙƒØ§Ø±ØŒ ÙˆÙ†Ù†Ø¸Ù… Ø§Ù„ÙÙˆØ¶Ù‰ Ø§Ù„ØªÙ‚Ù†ÙŠØ©.
            </p>
        </div>
        <a href="https://wa.me/963938624226" class="sidebar-link"><i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨</a>
        <a href="https://www.facebook.com/share/1AZTCywPbC/" class="sidebar-link"><i class="fab fa-facebook"></i> ÙÙŠØ³Ø¨ÙˆÙƒ</a>
        <a href="https://www.instagram.com/m_al_boushi" class="sidebar-link"><i class="fab fa-instagram"></i> Ø§Ù†Ø³ØªØºØ±Ø§Ù…</a>
        <a href="tel:+963938624226" class="sidebar-link"><i class="fas fa-phone"></i> Ø§ØªØµØ§Ù„ Ù‡Ø§ØªÙÙŠ</a>
    </div>
    <div id="overlay" onclick="closeNav()"></div>

    <div class="hero">
        <h1>Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</h1>
        <p>ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø°ÙƒÙŠØ©</p>
        
        <div class="stats">
            <div class="stat-item">
                <span class="stat-num" id="appCount">0</span><span class="stat-lbl">ØªØ·Ø¨ÙŠÙ‚</span>
            </div>
            <div class="stat-item">
                <span class="stat-num">5K+</span><span class="stat-lbl">ØªÙ†Ø²ÙŠÙ„</span>
            </div>
            <div class="stat-item">
                <span class="stat-num">4.9</span><span class="stat-lbl">ØªÙ‚ÙŠÙŠÙ…</span>
            </div>
        </div>

        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="searchInput" class="search-box" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ØªØ·Ø¨ÙŠÙ‚ØŒ Ù„Ø¹Ø¨Ø©ØŒ Ø£Ùˆ Ù…Ù„Ù...">
        </div>
    </div>

    <div class="tabs-wrapper">
        <div class="tabs-container">
            <button class="tab-btn active" id="btn-ALL" onclick="filterApps('ALL', this)">ğŸŒŸ Ø§Ù„ÙƒÙ„</button>
            <button class="tab-btn" id="btn-WEBSITE" onclick="filterApps('WEBSITE', this)">ğŸŒ Ù…ÙˆØ§Ù‚Ø¹</button>
            <button class="tab-btn" id="btn-PROGRAM" onclick="filterApps('PROGRAM', this)">ğŸ“± ØªØ·Ø¨ÙŠÙ‚Ø§Øª</button>
            <button class="tab-btn" id="btn-GAME" onclick="filterApps('GAME', this)">ğŸ® Ø£Ù„Ø¹Ø§Ø¨</button>
            <button class="tab-btn" id="btn-FILE" onclick="filterApps('FILE', this)">ğŸ“ Ù…Ù„ÙØ§Øª</button>
        </div>
    </div>

    <div class="grid" id="container">
        <div class="status"><i class="fas fa-circle-notch fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±...</div>
    </div>

    <footer>&copy; 2026 M.Al.Boushi Store - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC_iEb4UhUREVJ2mfj00BounPVaeGQr7wI",
            authDomain: "mohammadalboushi-e9231.firebaseapp.com",
            projectId: "mohammadalboushi-e9231",
            databaseURL: "https://mohammadalboushi-e9231-default-rtdb.firebaseio.com/",
            appId: "1:236925802081:web:2e26094ab5ecdf988f3c20"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        let allAppsData = [];
        let currentCategory = 'ALL';
        let hiddenCategories = [];

        onValue(ref(db, 'settings/categories'), (snapshot) => {
            const cats = snapshot.val() || {};
            hiddenCategories = [];
            const types = ['PROGRAM', 'GAME', 'WEBSITE', 'FILE'];
            
            types.forEach(type => {
                const btn = document.getElementById(`btn-${type}`);
                if (cats[type] === false) {
                    btn.style.display = 'none';
                    hiddenCategories.push(type);
                } else {
                    btn.style.display = 'block';
                }
            });
            
            if (hiddenCategories.includes(currentCategory)) {
                filterApps('ALL', document.getElementById('btn-ALL'));
            } else {
                renderApps();
            }
        });

        onValue(ref(db, 'apps'), (snapshot) => {
            const container = document.getElementById('container');
            container.innerHTML = '';
            const data = snapshot.val();

            if (data) {
                allAppsData = Object.values(data)
                    .filter(app => !app.isHidden)
                    .sort((a, b) => (a.order || 0) - (b.order || 0));

                document.getElementById('appCount').innerText = allAppsData.length;
                renderApps();
            } else {
                container.innerHTML = "<div class='status'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</div>";
                document.getElementById('appCount').innerText = 0;
            }
        });

        window.filterApps = (cat, btn) => {
            currentCategory = cat;
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');
            if(btn) btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            renderApps();
        };

        function renderApps(searchTerm = "") {
            const container = document.getElementById('container');
            container.innerHTML = '';
            const favs = JSON.parse(localStorage.getItem('favorites')) || [];

            const filtered = allAppsData.filter(app => {
                const matchCat = (currentCategory === 'ALL') || (app.type === currentCategory);
                const notHiddenCat = !hiddenCategories.includes(app.type);
                const matchSearch = app.name.toLowerCase().includes(searchTerm.toLowerCase());
                return matchCat && notHiddenCat && matchSearch;
            });

            if (filtered.length === 0) {
                container.innerHTML = "<div class='status'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>";
                return;
            }

            filtered.forEach(app => {
                let badgeTxt = "MOD"; let btnTxt = "ØªØ­Ù…ÙŠÙ„";
                if(app.type === 'WEBSITE') { badgeTxt = "WEB"; btnTxt = "Ø²ÙŠØ§Ø±Ø©"; }
                else if(app.type === 'GAME') { badgeTxt = "GAME"; btnTxt = "Ù„Ø¹Ø¨"; }
                else if(app.type === 'FILE') { badgeTxt = "FILE"; btnTxt = "ØªÙ†Ø²ÙŠÙ„"; }

                const isFav = favs.includes(app.name);
                const heartClass = isFav ? "fa-solid active" : "fa-regular";

                const card = document.createElement('a');
                card.className = 'card';
                card.href = app.link;
                card.target = '_blank';
                card.innerHTML = `
                    <span class="mod-badge">${badgeTxt}</span>
                    <button class="heart-btn" onclick="toggleFavorite(this, '${app.name}')">
                        <i class="${heartClass} fa-heart"></i>
                    </button>
                    <img src="${app.img}" onerror="this.src='https://cdn-icons-png.flaticon.com/512/564/564619.png'" loading="lazy">
                    <div class="card-title">${app.name}</div>
                    <div class="get-btn">${btnTxt}</div>
                `;
                container.appendChild(card);
            });
        }

        document.getElementById('searchInput').addEventListener('input', (e) => renderApps(e.target.value));

        window.toggleTheme = () => {
            const btn = document.getElementById('themeBtn');
            if (document.body.hasAttribute('data-theme')) {
                document.body.removeAttribute('data-theme');
                btn.classList.replace('fa-sun', 'fa-moon');
                localStorage.setItem('theme', 'dark');
            } else {
                document.body.setAttribute('data-theme', 'light');
                btn.classList.replace('fa-moon', 'fa-sun');
                localStorage.setItem('theme', 'light');
            }
        };
        if (localStorage.getItem('theme') === 'light') {
            document.body.setAttribute('data-theme', 'light');
            document.getElementById('themeBtn').classList.replace('fa-moon', 'fa-sun');
        }

        // Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ù…Ù†Ø¹ Ø³ÙƒØ±ÙˆÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©)
        window.openNav = () => { 
            document.getElementById("mySidebar").style.width = "280px"; 
            document.getElementById("overlay").style.display = "block";
            document.body.classList.add("no-scroll"); // Ù‚ÙÙ„ Ø§Ù„Ø®Ù„ÙÙŠØ©
        };
        window.closeNav = () => { 
            document.getElementById("mySidebar").style.width = "0"; 
            document.getElementById("overlay").style.display = "none";
            document.body.classList.remove("no-scroll"); // ÙØªØ­ Ø§Ù„Ø®Ù„ÙÙŠØ©
        };
        
        window.toggleFavorite = (btn, appName) => {
            event.preventDefault(); event.stopPropagation();
            let favs = JSON.parse(localStorage.getItem('favorites')) || [];
            if (favs.includes(appName)) {
                favs = favs.filter(i => i !== appName);
                btn.classList.remove('active');
                btn.classList.replace('fa-solid', 'fa-regular');
            } else {
                favs.push(appName);
                btn.classList.add('active');
                btn.classList.replace('fa-regular', 'fa-solid');
            }
            localStorage.setItem('favorites', JSON.stringify(favs));
        };
    </script>
</body>
</html>
